var _____WB$wombat$assign$function_____ = function(name) {return (self._wb_wombat && self._wb_wombat.local_init && self._wb_wombat.local_init(name)) || self[name]; };
if (!self.__WB_pmw) { self.__WB_pmw = function(obj) { this.__WB_source = obj; return this; } }
{
  let window = _____WB$wombat$assign$function_____("window");
  let self = _____WB$wombat$assign$function_____("self");
  let document = _____WB$wombat$assign$function_____("document");
  let location = _____WB$wombat$assign$function_____("location");
  let top = _____WB$wombat$assign$function_____("top");
  let parent = _____WB$wombat$assign$function_____("parent");
  let frames = _____WB$wombat$assign$function_____("frames");
  let opener = _____WB$wombat$assign$function_____("opener");

MySpace.UI._QuickPostControl=function(A){MySpace.UI._QuickPostControl.initializeBase(this,[A])};MySpace.UI._QuickPostControl.prototype={textboxTip:"",webServiceUrl:"",webServiceParams:null,hideCB:null,resizeCB:null,isShowingCB:null,enableBlurBehavior:false,enableCancel:false,cancelButton:null,submitButton:null,previewButton:null,editButton:null,closeButton:null,mediaInPopup:true,_width:700,initialize:function(){this.onTextboxBlurHandler=Function.createDelegate(this,this._onTextboxBlur);this.id="msQuickPost"+Math.round(Math.random()*1000);this._addStyles();var D=this.get_element();Sys.UI.DomElement.addCssClass(D,"quickPostControl");D.style.width=this._width+"px";this._editDiv=document.createElement("div");this._editDiv.className="edit";D.appendChild(this._editDiv);var B=Function.createDelegate(this,function(F,E){this[F]=document.createElement("div");this[F].style.display="none";this[F].className=E;D.appendChild(this[F])});B("_previewDiv","preview");B("_captchaDiv","captcha");B("_alertDiv","alert");B("_errorDiv","error");this._captchaControl=$create(MySpace.UI.Captcha,null,{submit:Function.createDelegate(this,this._submit)},null,this._captchaDiv);var A=document.createElement("div");A.className="buttons";D.appendChild(A);var C=Function.createDelegate(this,function(F,E){if(!this[F]){this[F]=document.createElement("input");this[F].type="button";if(F=="cancelButton"){this[F].className="btnCancel"}A.appendChild(this[F])}if(F!="cancelButton"){$defBtn(this[F])}$addHandler(this[F],"click",Function.createDelegate(this,this[E]))});C("previewButton","_preview");C("editButton","_edit");C("submitButton","_submit");C("closeButton","_hide");C("cancelButton","_cancel");if(this.resizeCB){this.resizeCB(700)}},checkPostAllowed:function(A,B){this._call("IsQuickPostAllowed",null,Function.createPartial(this,this._onCheckComplete,A,B))},_onCheckComplete:function(B,E,A,C){this._addStrings(A.strings);this.editButton.value=MySpaceRes.UserPage?MySpaceRes.UserPage.Edit:"Edit";this.closeButton.value=MySpaceRes.ProfileEdit?MySpaceRes.ProfileEdit.Close:"Close";this.cancelButton.value=MySpaceRes.ProfileEdit?MySpaceRes.ProfileEdit.Cancel:"Cancel";if(A.success){this._under18Message=A.under18Message;this._blankBodyMessage=A.blankBodyMessage;this._lengthExceededMessage=A.lengthExceededMessage;this._allowHtml=A.allowHtml;this._initialTextboxHeight=A.initialTextboxHeight;this._rteEnabled=A.rteEnabled;if(window.punymce){punymce.mediaSelectorEnabled=A.mediaSelectorEnabled}this._clearError();this.previewButton.value=this.submitButton.value=this._submitLabel=A.submitLabel;var F=[this.submitButton];if(this.enableCancel){Array.add(F,this.cancelButton)}this._showButtons(this._allowHtml?[this.previewButton]:F);this._showDiv(this._editDiv);if(B){B()}this._createFields(A.fields,E,A.rteToolbarType);this._noHtmlDiv.innerHTML=A.message||"";this._noHtmlDiv.style.display=this._allowHtml?"none":"";this._checkContentInterval=window.setInterval(Function.createDelegate(this,this._checkContent),1000);this._focusContent();var D=MySpace.Utils.Selector.query(".mceToolbar",this._quickPostDiv)[0];if(D){setTimeout(function(){D.style.zoom=1},0)}}else{this._showAlert(A.message);if(B){B()}}},_createFields:function(L,I,E){L=(L&&L.length)?L:[{type:"body"}];this._extraFields={};this._editDiv.innerHTML="";var S=(L.length==1)&&(L[0].type=="body")&&!L[0].label;var K=false;for(var M=0;M<L.length;M++){if(L[M].label&&L[M].type!="checkbox"){K=true}}if(this._under18Message){var A=document.createElement("div");A.className="under18";A.innerHTML=this._under18Message;this._editDiv.appendChild(A)}if(!S){var N=document.createElement("table");this._editDiv.appendChild(N)}this._focusField=null;var R=(this._width-(K?18:12))+"px";for(var M=0;M<L.length;M++){var B;if(S){B=this._editDiv}else{var C=N.insertRow(-1);if(K){var P=C.insertCell(-1);P.className="labelCell";P.innerHTML=(L[M].type=="checkbox")?"":(L[M].label||"")}B=C.insertCell(-1)}switch(L[M].type){case"text":var J=document.createElement("input");J.className="textInput";J.style.width=R;J.value=L[M].value||"";if(L[M].maxLength){J.maxLength=L[M].maxLength}B.appendChild(J);this._extraFields[L[M].paramName]=J;if(!this._focusField&&!L[M].value){this._focusField=J}break;case"static":B.innerHTML=L[M].value;break;case"checkbox":var G=document.createElement("input");G.type="checkbox";G.id=this.id+"fld"+M;B.appendChild(G);G.checked=!!(L[M].value);var D=document.createElement("label");D.setAttribute("for",G.id);D.innerHTML=L[M].label;B.appendChild(D);this._extraFields[L[M].paramName]=G;break;case"body":this._maxBodyLength=L[M].maxLength;this._noHtmlDiv=document.createElement("div");this._noHtmlDiv.className="noHtml";B.appendChild(this._noHtmlDiv);this._plainTextDiv=document.createElement("div");B.appendChild(this._plainTextDiv);var H=document.createElement("textarea");H.className="textInput";H.style.width=R;H.style.height=this._initialTextboxHeight+"px";this._plainTextDiv.appendChild(H);var F=(this.textboxTip=="default")?MySpaceRes.Comment.WriteCommentHere:this.textboxTip;this._textbox=$create(MySpace.UI.DefaultTextboxBehavior,{defaultValue:F},{onBlur:this.onTextboxBlurHandler},null,H);this._textboxCopyNode=document.createElement("div");this._textboxCopyNode.className="copy textInput";this._textboxCopyNode.style.width=R;if(Sys.Browser.agent==Sys.Browser.InternetExplorer){this._textboxCopyNode.style.lineHeight=(Sys.Browser.version>=7)?"14px":"13px"}this._plainTextDiv.appendChild(this._textboxCopyNode);this._rteDiv=document.createElement("div");B.appendChild(this._rteDiv);this._rteTextarea=document.createElement("textarea");this._rteTextarea.id="msQuickPostBody"+Math.floor(Math.random()*1000);this._rteDiv.appendChild(this._rteTextarea);var O=this._rteEnabled&&this._allowHtml;this._plainTextDiv.style.display=O?"none":"";this._rteDiv.style.display=O?"":"none";if(O){this._editor=new punymce.Editor({id:this._rteTextarea.id,width:this._width-(K?8:2),height:this._initialTextboxHeight-10,toolbarType:E,mediaInPopup:this.mediaInPopup})}this._setContent(L[M].value||I||"");if(!this._focusField&&!L[M].value){this._focusField="body"}break}}var Q=P?P.offsetWidth:0;this.get_element().style.width=(this._width+5+Q)+"px";if(this.resizeCB){this.resizeCB(this._width+5+Q)}},_checkContent:function(){if(!this.isShowingCB()||this._editDiv.style.display=="none"){return true}var A=this._allowHtml?this.previewButton:this.submitButton;if(this._maxBodyLength&&this._getContent().length>this._maxBodyLength){this._showError(String.format(this._lengthExceededMessage,this._maxBodyLength));this._showingLengthError=true;A.disable();return false}else{if(this._showingLengthError){this._clearError();A.enable()}}if(this._allowHtml){A.value=this._containsHtml()?MySpaceRes.ProfileEdit.Preview1:this._submitLabel}else{if(this._containsHtml()){this._showError(MySpaceRes.ProfileEdit.HTMLNotAllowed);this._showingHtmlError=true;A.disable();return false}else{if(this._showingHtmlError){this._clearError();A.enable()}}}return true},_containsHtml:function(){var A=this._getContent();if(this._plainTextDiv&&this._plainTextDiv.style.display=="none"){A=A.replace(this._brRegex,"")}return this._htmlRegex.test(A)},_htmlRegex:/(<|&lt).*(>|&gt)/i,_brRegex:/(<br[^>]*>)|(<html[^>]*>)/gi,_autoSizeTextbox:function(){if(!this.isShowingCB()){return}window.setTimeout(Function.createDelegate(this,function(){if(this._allowHtml&&this._rteEnabled){var D=this._editor.getIfr(),E=this._editor.getDoc().body,A=Sys.Browser.agent==Sys.Browser.InternetExplorer,M=A?E.scrollHeight:E.offsetHeight,B=this.get_element().offsetHeight-D.offsetHeight,L=this._initialTextboxHeight,J=(window.innerHeight||document.documentElement.offsetHeight)-B-175,C="hidden";if(M<L){M=L}else{if(M>J){M=Math.max(L,J);C="auto"}}E.style.overflowY=C;D.style.height=M+"px"}else{var K=this._textbox.get_value();if(Sys.Browser.agent==Sys.Browser.Safari){K=K.replace(/\n$/,"")}this._textboxCopyNode.innerHTML=K.replace(/</g,"&lt;").replace(/&/g,"&amp;").replace(/\n/g,"<br>")+"l";var I=this._textbox.get_element(),B=this.get_element().offsetHeight-I.offsetHeight,H=(document.compatMode=="BackCompat")?0:10,M=this._textboxCopyNode.offsetHeight-H,L=this._initialTextboxHeight,J=(window.innerHeight||document.documentElement.offsetHeight)-B-175,C="hidden";if(M<L){M=L}else{if(M>J){M=Math.max(L,J);C="auto"}}var G=(Sys.Browser.agent==Sys.Browser.Firefox)&&(C!=I.style.overflowY);var F=I.selectionStart;I.style.overflowY=C;if(G){I.focus();I.setSelectionRange(F,F);I.scrollTop=10000}I.style.height=M+"px"}}),0)},_preview:function(A){if(!this._containsHtml()){return this._submit(A)}if(this._checkIfEmpty()){return}A.preventDefault();this._call("PreviewQuickPost",{post:this._getContent()},this._onPreviewComplete)},_onPreviewComplete:function(A,B){if(A.success){this._clearError();this._previewDiv.innerHTML=A.previewHtml;MySpace.Util.applyWBRToElement(this._previewDiv,{frequency:50});this._showDiv(this._previewDiv);this._showButtons([this.submitButton,this.editButton]);MySpace.Utils.Media.loadStaticContent(this._previewDiv);this._previewDiv.style.height="0";this._autoSizePreview()}else{this._showError(A.message)}},_autoSizePreview:function(){if(!this.isShowingCB()){return}var F=this._previewDiv,C=MySpace.UI.getComputedStyle(F),B=(document.compatMode=="BackCompat")?-2:10,A=F.scrollHeight-B,E=this._initialTextboxHeight,D=(window.innerHeight||document.documentElement.offsetHeight)-175;if(A<E){A=E}else{if(A>D){A=Math.max(E,D)}}if(document.compatMode=="BackCompat"&&Sys.Browser.agent!=Sys.Browser.InternetExplorer){A-=12}if(F.style.height!=A+"px"){F.style.height=A+"px";F.scrollTop=0}},_edit:function(A){A.preventDefault();this._clearError();this._showDiv(this._editDiv);this._showButtons([this.previewButton])},_submit:function(A){if(!this._checkContent()){return}if(A&&A.preventDefault){A.preventDefault()}if(this._checkIfEmpty()){return}this.submitButton.disable();var B=(this._captchaDiv.style.display=="none")?null:this._captchaControl.get_value();this._call("AddQuickPost",{post:this._getContent(),captcha:B},this._onSubmitComplete)},_onSubmitComplete:function(A,B){this.submitButton.enable();this._clearError();if(A.success){if(A.message.length>0){this._showAlert(A.message);this._hideTimeout=setTimeout(Function.createDelegate(this,this._hide),2000)}else{this._hide(B,true)}this._fire_success(A.data)}else{if(A.captchaParams){this._showDiv(this._captchaDiv);this._showButtons([]);A.captchaParams.submitLabel=this._submitLabel;this._captchaControl.show(A.captchaParams);if(A.message){this._showError(A.message)}}else{this._showError(A.message)}}},_cancel:function(A){var B=(this.textboxTip=="default")?MySpaceRes.Comment.WriteCommentHere:this.textboxTip;this._textbox.set_value(B);if(A&&A.preventDefault){A.preventDefault()}this._hide(A,true)},_hide:function(A,B){window.clearTimeout(this._hideTimeout);if(A&&A.preventDefault){A.preventDefault()}if(this.hideCB){this.hideCB(B)}window.clearInterval(this._checkContentInterval);window.clearInterval(this._autoSizePreviewInterval);window.clearInterval(this._autoSizeTextboxInterval)},_onError:function(A){this.submitButton.enable();this._isCallInProgress=false;alert(MySpaceRes.Header.ErrorMessage.replace(/<br[^>]*>/ig,"\n"))},_addStyles:function(){if(MySpace.UI._QuickPostControl.stylesAdded){return}MySpace.UI._QuickPostControl.stylesAdded=true;MySpace.UI.addStyles(".quickPostControl { text-align:left; }.quickPostControl .under18 { margin:10px 15px 10px; }.quickPostControl .noHtml { margin:2px 15px 10px; }.quickPostControl .error { margin:10px 0; font-weight:bold; text-align:center; }.quickPostControl .captcha { text-align:center; }.quickPostControl .captchaDirections { width:330px; margin:0 auto; text-align:left; }.quickPostControl .captcha input { border:1px solid #ccc; padding:3px; }.quickPostControl .captcha button { margin-left:3px; padding:1px; }.quickPostControl .edit td { padding:3px 0; vertical-align:middle; }.quickPostControl .edit td.labelCell { text-align:right; font-weight:bold; padding:3px 6px 3px 3px; }.quickPostControl .edit .textInput,.quickPostControl .preview { padding:5px; border:1px solid #ccc; font:11px verdana,arial,helvetica,sans-serif; }.quickPostControl .edit textarea.textInput,.quickPostControl .edit .copy,.quickPostControl .preview { text-align:left; overflow:auto; }.quickPostControl .edit .copy { position:absolute; left:-10000px; top:-10000px; }.quickPostControl .preview { margin:1px 5px 1px 0; }.quickPostControl .alert { text-align:center; height:124px; font-size:14px; }.quickPostControl .alert a { text-decoration:none; }.quickPostControl .alert td { vertical-align:middle; text-align:center; }.quickPostControl .buttons { text-align:right; padding:3px 5px; }.quickPostControl .buttons .msDefBtn, .quickPostControl .buttons .msDefBtnDisabled { margin-left:7px; }.qpNoInherit .under18 { color:#000; }.qpNoInherit .noHtml { color:red; }.qpNoInherit .error { color:red; }.qpNoInherit .captcha { color:#000; }.qpNoInherit .preview { color:#000; }.qpNoInherit .alert td { color:#000; }")},_addStrings:function(A){for(var B in A){if(!MySpaceRes[B]){MySpaceRes[B]={}}for(var C in A[B]){MySpaceRes[B][C]=A[B][C]}}},_checkIfEmpty:function(){var A=this._getContent();A=A.replace(/<\/?(br|div|p)[^>]*>/gi,"");if(/\S/.test(A)){return false}else{this._showError(this._blankBodyMessage);return true}},_getContent:function(){if(!this._plainTextDiv){return""}else{if(this._plainTextDiv.style.display==""){return this._textbox.get_value().replace(/(\r\n)|\r|\n/g,"\r\n")}else{return this._editor?this._editor.getContent():""}}},_setContent:function(A){if(this._plainTextDiv.style.display==""){this._textbox.set_value(A)}else{this._editor.setContent(A)}},_focusContent:function(){if(this._focusField=="body"){if(this._plainTextDiv.style.display==""){this._textbox.get_element().focus()}else{var A=this._editor.getWin();setTimeout(function(){A.focus()},0)}}else{if(this._focusField){this._focusField.focus()}}},_call:function(A,F,G){if(this._isCallInProgress){return}F=F||{};F.args=this.webServiceParams;F.hash=MySpace.UI._QuickPostControl.hashToken;if(this._extraFields){for(var D in this._extraFields){var C=this._extraFields[D],E;if(C.type=="checkbox"){E=C.checked}else{E=C.value}F.args[D]=E}}var B=this.webServiceUrl.replace(/https?:\/\/[^\/]*\//,"/");Sys.Net.WebServiceProxy.invoke(B,A,false,F,Function.createPartial(this,"_callComplete",G),Function.createDelegate(this,this._onError));this._isCallInProgress=true},_callComplete:function(C,A,B){this._isCallInProgress=false;if(!A.success&&A.redirectUrl){window.location=A.redirectUrl}else{C.call(this,A,B)}},_showButtons:function(B){this.cancelButton.style.display="none";this.submitButton.hide();this.previewButton.hide();this.editButton.hide();this.closeButton.hide();this.previewButton.value=this._containsHtml()?MySpaceRes.ProfileEdit.Preview1:this._submitLabel;for(var A=0;A<B.length;A++){if(B[A].show){B[A].show()}else{B[A].style.display=""}}},_showDiv:function(A){this._editDiv.style.display="none";this._previewDiv.style.display="none";this._captchaDiv.style.display="none";this._alertDiv.style.display="none";A.style.display="";if(A==this._captchaDiv){this._captchaControl.focus()}else{this._captchaControl.hide()}window.clearInterval(this._autoSizePreviewInterval);window.clearInterval(this._autoSizeTextboxInterval);if(A==this._editDiv){this._autoSizeTextboxInterval=window.setInterval(Function.createDelegate(this,this._autoSizeTextbox),300)}else{if(A==this._previewDiv){this._autoSizePreviewInterval=window.setInterval(Function.createDelegate(this,this._autoSizePreview),300)}}},_showError:function(B){var A=this._errorDiv;A.innerHTML=B;A.style.display="";this._showingHtmlError=false;this._showingLengthError=false},_clearError:function(){this._errorDiv.style.display="none";this._showingHtmlError=false;this._showingLengthError=false},_showAlert:function(A){this._clearError();this._showDiv(this._alertDiv);this._alertDiv.innerHTML="<table height='100%' width='100%'><tr><td>"+A+"</td></tr></table>";this._showButtons([this.closeButton])},get_width:function(){return this._width},set_width:function(A){this._width=A;if(!(this.isShowingCB&&this.isShowingCB())){return}this.get_element().style.width=A+"px";if(this._textbox){this._textbox.get_element().style.width=(A-12)+"px"}if(this._textboxCopyNode){this._textboxCopyNode.style.width=(A-12)+"px"}if(this._editor){this._editor.getIfr().style.width=(A-2)+"px"}},_onTextboxBlur:function(B,A){if(this.enableBlurBehavior&&this._textbox.get_value()==""){this._hide(A,true)}},get_cancelButton:function(){return this.cancelButton},set_cancelButton:function(A){this.cancelButton=A},get_enableBlurBehavior:function(){return this.enableBlurBehavior},set_enableBlurBehavior:function(A){this.enableBlurBehavior=A},get_enableCancel:function(){return this.enableCancel},set_enableCancel:function(A){this.enableCancel=A},get_submitButton:function(){return this.submitButton},set_submitButton:function(A){this.submitButton=A},get_previewButton:function(){return this.previewButton},set_previewButton:function(A){this.previewButton=A},get_editButton:function(){return this.editButton},set_editButton:function(A){this.editButton=A},get_closeButton:function(){return this.closeButton},set_closeButton:function(A){this.closeButton=A},get_webServiceParams:function(){return this.webServiceParams},set_webServiceParams:function(A){this.webServiceParams=A},add_success:function(A){this._get_events().addHandler("success",A)},remove_success:function(A){this._get_events().removeHandler("success",A)},_fire_success:function(B){var A=this._get_events().getHandler("success");if(A){A(this,{data:B})}},_get_events:function(){if(!this._events){this._events=new Sys.EventHandlerList()}return this._events}};MySpace.UI._QuickPostControl.registerClass("MySpace.UI._QuickPostControl",Sys.UI.Control);MySpace.UI.QuickPostPopup=function(A){MySpace.UI.QuickPostPopup.initializeBase(this,[A])};MySpace.UI.QuickPostPopup.prototype={title:"",textboxTip:"default",webServiceUrl:"",webServiceParams:null,initialize:function(){var D=document.createElement("div");D.className="qpNoInherit";this._popup=MySpace.UI.Popup.create(D,this.title);this._popup.set_top(60);var B=this._popup.add_button("",false,function(){});var E=this._popup.add_button("",false,function(){});var C=this._popup.add_button("",false,function(){});var A=this._popup.add_button("",false,function(){});var F=this._popup.add_button("",false,function(){});this._quickPostControl=$create(MySpace.UI._QuickPostControl,{textboxTip:this.textboxTip,webServiceUrl:this.webServiceUrl,webServiceParams:this.webServiceParams,hideCB:Function.createDelegate(this,this.hide),resizeCB:Function.createDelegate(this,this.resize),isShowingCB:Function.createDelegate(this,this._isShowing),submitButton:C,previewButton:B,editButton:E,closeButton:A,cancelButton:F,mediaInPopup:false},{success:Function.createDelegate(this,this._fire_success)},null,D)},show:function(A){this._quickPostControl.checkPostAllowed(Function.createDelegate(this,this._show),A)},_show:function(){this._popup.set_title(this.title||MySpaceRes.Comment.AddComment);this._popup.show()},hide:function(){this._popup._hide()},_isShowing:function(){return this._popup&&this._popup.get_showing()},resize:function(A){this._popup.set_width(A+18)},get_webServiceParams:function(){return this.webServiceParams},set_webServiceParams:function(A){this.webServiceParams=A;if(this._quickPostControl){this._quickPostControl.set_webServiceParams(A)}},add_success:function(A){this._get_events().addHandler("success",A)},remove_success:function(A){this._get_events().removeHandler("success",A)},_fire_success:function(B,A){var C=this._get_events().getHandler("success");if(C){C(this,A)}},_get_events:function(){if(!this._events){this._events=new Sys.EventHandlerList()}return this._events}};MySpace.UI.QuickPostPopup.registerClass("MySpace.UI.QuickPostPopup",Sys.Component);MySpace.UI.QuickPostInline=function(A){MySpace.UI.QuickPostInline.initializeBase(this,[A])};MySpace.UI.QuickPostInline.prototype={textboxWrapClass:null,textboxTip:"default",enableCancel:false,enableBlurBehavior:false,webServiceUrl:"",webServiceParams:null,initialize:function(){this._textarea=this.get_element().getElementsByTagName("textarea")[0];this._fakeSubmitButton=this.get_element().getElementsByTagName("button")[0]||this.get_element().getElementsByTagName("input")[0];$addHandler(this._textarea,"focus",Function.createDelegate(this,this.show));$addHandler(this._fakeSubmitButton,"click",Function.createDelegate(this,this.show));$addHandler(window,"resize",Function.createDelegate(this,this._resize));if(this.textboxWrapClass){this._textboxWrap=MySpace.Utils.Selector.query("."+this.textboxWrapClass,this.get_element())[0]}},show:function(){this._width=MySpace.UI.getContentBox(this.get_element()).w;if(this._quickPostControl){this._quickPostControl.set_width(this._width)}else{this._quickPostDiv=document.createElement("div");this._quickPostDiv.style.display="none";this.get_element().appendChild(this._quickPostDiv);this._quickPostControl=$create(MySpace.UI._QuickPostControl,{textboxTip:this.textboxTip,width:this._width,webServiceUrl:this.webServiceUrl,webServiceParams:this.webServiceParams,enableCancel:this.enableCancel,enableBlurBehavior:this.enableBlurBehavior,hideCB:Function.createDelegate(this,this.hide),isShowingCB:Function.createDelegate(this,this._isShowing)},{success:Function.createDelegate(this,this._fire_success)},null,this._quickPostDiv)}this._quickPostControl.checkPostAllowed(Function.createDelegate(this,this._show))},_show:function(){this._textarea.style.position="absolute";this._textarea.style.left="-10000px";this._fakeSubmitButton.style.display="none";if(this._textboxWrap){this._textboxWrap.style.display="none"}this._quickPostDiv.style.display="";this._quickPostDiv.style.opacity="";this._quickPostDiv.style.visibility="";Sys.UI.DomElement.removeCssClass(this.get_element(),"qpiInitMode");MySpace.UI.Effects.Glitz.setElementOpacity(this._quickPostDiv,1)},hide:function(A){if(!A){($create(MySpace.UI.Effects.FadeAnimation,{target:this._quickPostDiv,effect:MySpace.UI.Effects.FadeEffect.FadeOut,duration:0.5},{ended:Function.createDelegate(this,this.reset)})).play()}else{this.reset()}},_isShowing:function(){return this._quickPostDiv&&this._quickPostDiv.style.display==""},_resize:function(){if(this._isShowing()){var C=(Sys.Browser.agent==Sys.Browser.InternetExplorer&&Sys.Browser.version==6);var B=this._quickPostControl.get_element();if(C){B.style.position="absolute"}var A=MySpace.UI.getContentBox(this.get_element()).w;if(C){B.style.position=""}if(A!=this._width){this._quickPostControl.set_width(A)}}},reset:function(){Sys.UI.DomElement.addCssClass(this.get_element(),"qpiInitMode");this._textarea.style.position="";this._fakeSubmitButton.style.display="";if(this._textboxWrap){this._textboxWrap.style.display=""}if(this._quickPostDiv){this._quickPostDiv.style.display="none"}},get_enableBlurBehavior:function(){return this.enableBlurBehavior},set_enableBlurBehavior:function(A){this.enableBlurBehavior=A},get_enableCancel:function(){return this.enableCancel},set_enableCancel:function(A){this.enableCancel=A},get_textboxWrapClass:function(){return this.textboxWrapClass},set_textboxWrapClass:function(A){this.textboxWrapClass=A},get_webServiceParams:function(){return this.webServiceParams},set_webServiceParams:function(A){this.webServiceParams=A;if(this._quickPostControl){this._quickPostControl.set_webServiceParams(A)}},add_success:function(A){this._get_events().addHandler("success",A)},remove_success:function(A){this._get_events().removeHandler("success",A)},_fire_success:function(B,A){var C=this._get_events().getHandler("success");if(C){C(this,A)}},_get_events:function(){if(!this._events){this._events=new Sys.EventHandlerList()}return this._events}};MySpace.UI.QuickPostInline.open=function(C){var A=$find(C);if(!A){return}if(A._textarea.style.display=="none"){A._quickPostControl._focusContent()}else{try{A._textarea.focus()}catch(B){}}};MySpace.UI.QuickPostInline.registerClass("MySpace.UI.QuickPostInline",Sys.UI.Control);MySpace.UI.ProfileCommentQuickPostPopup={popup:null,reload:false,show:function(B,D){var C=MySpace.UI.ProfileCommentQuickPostPopup;if(B&&B.preventDefault){B.preventDefault()}if(!D&&B&&B.target&&B.target.href){var A=B.target.href.match(/friendid=(\d+)/i);if(A&&A[1]){D=parseInt(A[1])}}if(!D){D=MySpace.ClientContext.DisplayFriendId}if(!D||D==-1){return}C.reload=(D==MySpace.ClientContext.DisplayFriendId)&&(MySpace.ClientContext.FunctionalContext=="UserViewComments");if(!C.popup){C.popup=$create(MySpace.UI.QuickPostPopup,{webServiceUrl:"/Modules/Common/Services/QuickComment.asmx",webServiceParams:{FriendId:D}});C.popup.add_success(Function.createDelegate(C,C.onCommentPosted))}else{C.popup.set_webServiceParams({FriendId:D})}C.popup.show();return false},onCommentPosted:function(A,B){if(this.reload&&B.data!="pendingApproval"&&(window.location.search.indexOf("page")==-1||window.location.search.match(/page=1[^0-9]/i))){window.location.reload(true)}}};MySpace.UI.MessagingQuickPostPopup={mailPopup:null,show:function(A,B){A.preventDefault();if(!this.mailPopup){this.mailPopup=$create(MySpace.UI.QuickPostPopup,{title:MySpaceRes.Messaging.SendAMessage,textboxTip:"",webServiceUrl:"/Modules/Messaging/Services/MessagingQuickPost.asmx",webServiceParams:{recipientId:B}})}else{this.mailPopup.set_webServiceParams({recipientId:B})}this.mailPopup.show()}};MySpace.UI.Captcha=function(A){MySpace.UI.Captcha.initializeBase(this,[A])};MySpace.UI.Captcha.prototype={_index:0,initialize:function(){var B=this.get_element();this._explanationDiv=document.createElement("div");B.appendChild(this._explanationDiv);this._img=document.createElement("img");B.appendChild(this._img);var A=document.createElement("a");A.href="#";var C=document.createElement("img");C.src="https://web.archive.org/web/20090508005631/http://x.myspacecdn.com/images/icons/refreshicon2.jpg";A.appendChild(C);B.appendChild(A);$addHandler(A,"click",Function.createDelegate(this,this._refresh));this._directionsDiv=document.createElement("div");this._directionsDiv.className="captchaDirections";B.appendChild(this._directionsDiv);this._textbox=document.createElement("input");this._textbox.id="captcha_text";B.appendChild(this._textbox);$addHandler(this._textbox,"keypress",Function.createDelegate(this,this._onKeyPress));this._submitButton=document.createElement("button");B.appendChild(this._submitButton);$addHandler(this._submitButton,"click",Function.createDelegate(this,this._onSubmitClick))},show:function(A){this._textbox.value="";this._imageUrl=this._img.src=A.imageUrl;this._explanationDiv.innerHTML=A.explanation;this._directionsDiv.innerHTML=A.directions;this._submitButton.style.display=A.submitLabel?"":"none";this._submitButton.innerHTML=A.submitLabel||"";this._refreshDelay=A.timeout*1000;this._refreshTimeout=window.setTimeout(Function.createDelegate(this,this._refresh),this._refreshDelay)},hide:function(){window.clearTimeout(this._refreshTimeout)},focus:function(){try{this._textbox.focus()}catch(A){}},get_value:function(){return this._textbox.value},_refresh:function(A){window.clearTimeout(this._refreshTimeout);if(A&&A.preventDefault){A.preventDefault()}this._textbox.value="";this._img.src=this._imageUrl+"&r="+ ++this._index;this._refreshTimeout=window.setTimeout(Function.createDelegate(this,this._refresh),this._refreshDelay)},_onKeyPress:function(A){if(A.charCode==13){this.raiseSubmit();A.preventDefault()}},_onSubmitClick:function(A){this.raiseSubmit();A.preventDefault()},get_events:function(){if(!this._events){this._events=new Sys.EventHandlerList()}return this._events},add_submit:function(A){this.get_events().addHandler("submit",A)},remove_submit:function(A){this.get_events().removeHandler("submit",A)},raiseSubmit:function(){var A=this.get_events().getHandler("submit");if(A){A(this,Sys.EventArgs.Empty)}}};MySpace.UI.Captcha.registerClass("MySpace.UI.Captcha",Sys.UI.Control);Type.registerNamespace("Friends.AddToFriendsPopOver");Friends.AddToFriendsPopOver=function(){Friends.AddToFriendsPopOver.initializeBase(this);this.isEnabled;this.iFrameSrc;this.cssSelector};Friends.AddToFriendsPopOver.prototype={_addToFrendsEls:[],_timerId:null,_atfoFrame:null,_atfoWaitDiv:null,addFriendPopup:null,add_complete:function(A){this.get_events().addHandler("complete",A)},remove_complete:function(A){this.get_events().removeHandler("complete",A)},raiseComplete:function(){var A=this.get_events().getHandler("complete");if(A){A(this)}},initialize:function(){this.isEnabled=!!this.isEnabled;if(this.isEnabled){Friends.AddToFriendsPopOver.callBaseMethod(this,"initialize");this.addStyles();this._bindToAddToFriendEls()}},dispose:function(){if(this._addToFrendsEls&&this._addToFrendsEls.length){for(var A=0;A<this._addToFrendsEls.length;A++){this._addToFrendsEls[A]&&$clearHandlers(this._addToFrendsEls[A])}}this._atfoFrame=null;this._timerId&&clearTimeout(this._timerId)},_bindToAddToFriendEls:function(){if(this.cssSelector){this._timerId&&clearTimeout(this._timerId);this._addToFrendsEls=MySpace.Utils.Selector.query(this.cssSelector);if(this._addToFrendsEls&&this._addToFrendsEls.length){for(var A=0;A<this._addToFrendsEls.length;A++){$addHandler(this._addToFrendsEls[A],"click",Function.createDelegate(this,this._invokPopOver))}}else{if(!this._timerId){this._timerId=window.setTimeout(Function.createDelegate(this,this._bindToAddToFriendEls),500)}}}},_invokPopOver:function(A){var B=null;var E=null;if(!A){return false}if(A.friendId){B=A.friendId}if(A.acctType){E=A.acctType}var D=A.target||A.srcElement;if(D){if(B==null){if(D.friendId){B=D.friendId}else{if(D.attributes.getNamedItem("friendId")&&D.attributes.getNamedItem("friendId").value>0){B=D.attributes.getNamedItem("friendId").value}else{var C=D.toString().toLowerCase().split("&");for(i in C){if(C[i].toString().indexOf("friendid",0)!=-1){B=C[i].toString().substr(9,C[i].toString().length);break}}}}}if(E==null){if(D.acctType){E=D.acctType}else{if(D.attributes.getNamedItem("acctType")&&D.attributes.getNamedItem("acctType").value>0){E=D.attributes.getNamedItem("acctType").value}}}}if(B&&E!=8){if(!this.addFriendPopup){this.addFriendPopup=MySpace.UI.Popup.create("",MySpaceRes.ViewAllFriendsPage.AddToFriends,Function.createDelegate(this,this.afterPopupClosed),false,false);this.addFriendPopup.set_width(552);this.addFriendPopup.remove_buttons();this.addFriendPopup.set_content("<div id='ATFPopUpContentWait' class='ATFPopUpContentWait'><img src='"+MySpace.StaticContentBase+"/modules/friends/static/img/icon_loading.gif' /></div><iframe id='PWOIframeID' scrolling='no' frameborder='0' class='addfriendrequestpopup' src='about:blank' allowtransparency='true' ><img src='https://web.archive.org/web/20090508005631/http://x.myspacecdn.com/modules/friends/static/img/icon_loading.gif' /></iframe>");this._atfoFrame=$get("PWOIframeID");this._atfoWaitDiv=$get("ATFPopUpContentWait")}if(this._atfoFrame){this._atfoFrame.src=String.format(this.iFrameSrc,B);this.addFriendPopup.show();if(A.preventDefault){A.preventDefault()}else{A.returnValue=false}}else{this._atfoWaitDiv=$get("ATFPopUpContentWait")}this.setGlobalPopupPosition()}},_getWindowScrollY:function(){return(typeof(window.pageYOffset)!=="undefined")?window.pageYOffset:document.documentElement.scrollTop},bindAddToFriendPopOver:function(A){this.cssSelector=A||this.cssSelector;this._bindToAddToFriendEls()},afterPopupClosed:function(B,A){this.setGlobalPopupPosition();if(A&&A.rUrl){window.location.href=A.rUrl}this.raiseComplete()},setGlobalPopupPosition:function(){this._atfoFrame&&(this._atfoFrame.style.width=this._atfoFrame.style.height=1+"px");this._atfoWaitDiv&&Sys.UI.DomElement.removeCssClass(this._atfoWaitDiv,"hide");if(!this.addFriendPopup){return}var A=this.addFriendPopup.get_element();if(A){if(browser.isIE6x){A.style.top=(this._getWindowScrollY()+50)+"px";return}else{A.style.top="50px";A.style.position="fixed"}}},addStyles:function(){MySpace.UI.addStyles(".addfriendrequestpopup {width:1px;height:1px;}.ATFPopUpContentWait {text-align:center; margin-top:35px;}",false,"atfoPopover")}};Friends.AddToFriendsPopOver.registerClass("Friends.AddToFriendsPopOver",Sys.Component);Friends.AddToFriendsPopOver.getInstance=function(){return $find("globalAddToFriendsPopover")};

}
/*
     FILE ARCHIVED ON 00:56:31 May 08, 2009 AND RETRIEVED FROM THE
     INTERNET ARCHIVE ON 20:45:58 Nov 29, 2021.
     JAVASCRIPT APPENDED BY WAYBACK MACHINE, COPYRIGHT INTERNET ARCHIVE.

     ALL OTHER CONTENT MAY ALSO BE PROTECTED BY COPYRIGHT (17 U.S.C.
     SECTION 108(a)(3)).
*/
/*
playback timings (ms):
  captures_list: 184.3
  exclusion.robots: 0.148
  exclusion.robots.policy: 0.139
  RedisCDXSource: 2.575
  esindex: 0.008
  LoadShardBlock: 159.376 (3)
  PetaboxLoader3.datanode: 198.173 (4)
  CDXLines.iter: 19.543 (3)
  load_resource: 277.978
  PetaboxLoader3.resolve: 216.624
*/